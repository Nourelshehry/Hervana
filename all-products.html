<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>All Products - Hervana</title>
  <link rel="stylesheet" href="all-products.css"/>
</head>
<body>

<!-- Header -->
<header>
  <!-- Left -->
  <div class="header-actions">
    <button class="back-btn" onclick="window.location.href='index.html'">‚Üê Home</button>
  </div>

  <!-- Center -->
  <div class="logo">
    <a href="index.html">Hervana</a>
  </div>

  <!-- Right -->
  <div class="header-actions">
    <button id="cart-btn">üõí <span id="cart-count">0</span></button>
  </div>
</header>

<!-- Products Section -->
<main class="products-container" id="products-container">
  <!-- ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ Ÿáÿ™ÿ™ÿ∂ÿßŸÅ ŸáŸÜÿß ŸÖŸÜ JSON -->
</main>

<!-- Added to Cart Message -->
<div id="cart-message" class="cart-message">Added to cart!</div>

<!-- Sidebar Cart -->
<aside id="cart-sidebar" class="cart-sidebar">
  <button id="close-cart">‚úñ</button>
  <h2>Your Cart</h2>
  <ul id="cart-items"></ul>
  <button id="checkout-btn">Checkout</button>
</aside>

<!-- Footer -->
<footer>
  <p>&copy; 2025 Hervana. All rights reserved.</p>
</footer>

<!-- Scripts -->
<script src="cart.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", async () => {
    const container = document.getElementById("products-container");

    try {
      // ‚úÖ ÿ¨ŸÑÿ® JSON ŸÖŸÜ GitHub
      const response = await fetch("https://raw.githubusercontent.com/Nourelshehry/Hervana/refs/heads/master/products.json");
      const products = await response.json();

      // ‚úÖ ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™
      container.innerHTML = products.map(product => `
        <div class="product-card">
          <img src="${product.images[0]}" alt="${product.name}" onclick="window.location.href='product.html?id=${product.id}'">
          <h3>${product.name}</h3>
          <p>${product.description}</p>
          <p class="price">EGP ${product.price}</p>
          ${
            product.stock > 0
              ? `<button 
                    class="add-to-cart"
                    data-id="${product.id}"
                    data-name="${product.name}"
                    data-price="${product.price}"
                    data-stock="${product.stock}"
                  >Add to Cart</button>`
              : `<button disabled>Out of Stock</button>`
          }
        </div>
      `).join("");

    } catch (err) {
      console.error("Error loading products:", err);
      container.innerHTML = "<p>‚ö†Ô∏è Failed to load products.</p>";
    }
  });
</script>
</body>
</html>
